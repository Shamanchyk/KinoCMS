"use strict";(self["webpackChunkkinocms"]=self["webpackChunkkinocms"]||[]).push([[675],{675:function(e,n,a){a.r(n),a.d(n,{default:function(){return y}});var s=a(252),t=a(963),i=a(577);const r={class:"container"},l={class:"card card-primary"},o=(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"На головній сторінці зверху")],-1),c={class:"card-body"},p={class:"file-input"},b={key:1,class:"delete-img"},g=["src"],d=["onClick"],u={key:0,class:"message"},h={class:"card-footer"};function f(e,n,a,f,k,m){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",l,[o,(0,s._)("form",{onSubmit:n[4]||(n[4]=(0,t.iM)(((...e)=>m.saveBaner&&m.saveBaner(...e)),["prevent"]))},[(0,s._)("div",c,[(0,s._)("div",p,[(0,s._)("input",{type:"file",ref:"fileInput2",class:"input-baner",onChange:n[0]||(n[0]=(...e)=>m.handleFileChange&&m.handleFileChange(...e)),multiple:""},null,544),0===k.banerTop.length?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:n[1]||(n[1]=(...e)=>m.triggerFileInput&&m.triggerFileInput(...e)),class:"btn btn-baner btn-default"},"Добавити")):(0,s.kq)("",!0),k.banerTop.length>=1?((0,s.wg)(),(0,s.iD)("div",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.banerTop,((e,n)=>((0,s.wg)(),(0,s.iD)("div",{class:"image-delete",key:n},[e?((0,s.wg)(),(0,s.iD)("img",{key:0,src:e,class:"imgInput"},null,8,g)):(0,s.kq)("",!0),e?((0,s.wg)(),(0,s.iD)("span",{key:1,class:"deleteSpan",onClick:e=>m.deleteBannerTop(n)},"x",8,d)):(0,s.kq)("",!0)])))),128)),k.banerTop.length>=1?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:n[2]||(n[2]=(...e)=>m.triggerFileInput&&m.triggerFileInput(...e)),class:"btn btn-block btn-default"},"Добавити")):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])]),e.showMessage?((0,s.wg)(),(0,s.iD)("div",u,(0,i.zw)(k.message),1)):(0,s.kq)("",!0),(0,s._)("div",h,[(0,s._)("button",{onClick:n[3]||(n[3]=(...e)=>m.saveBaner&&m.saveBaner(...e)),class:"btn btn-primary",type:"submit"},"Зберегти")])],32)])])}var k=a(355),m=a(650),T={data(){return{banners:{},banerTop:[],fileBanerTop:[],message:"Збережено!",doneTop:!1}},methods:{handleFileChange(e){const n=e.target.files;for(let a=0;a<n.length;a++){const e=n[a],s=URL.createObjectURL(e);this.banerTop.push(s),this.fileBanerTop.push(e)}},triggerFileInput(){this.$refs.fileInput2.click()},deleteBanerTop(e){this.banerTop.splice(e,1),this.fileBanerTop.splice(e,1)},async deleteBannerTop(e){this.banerTop.splice(e,1),this.fileBanerTop.splice(e,1);const n=(0,m.cF)(),a=(0,m.iH)(n,`banners/bannerTop/${e}`);try{await(0,m.oq)(a),console.log(`Файл з індексом ${e} успішно видалено`)}catch(r){console.error(`Помилка видалення файлу з індексом ${e}:`,r)}const s=(0,k.N8)(),t=`banners/bannerTop/${e}`,i=(0,k.iH)(s,t);await(0,k.Od)(i).then((()=>{console.log("Item successfully deleted from Realtime Database")})).catch((e=>{console.log("Error deleting item from Realtime Database: ",e)}))},async saveBaner(){const e=(0,k.N8)(),n=(0,m.cF)(),a="banners",s=(0,k.iH)(e,a),t=await(0,k.U2)(s),i=t.val()&&t.val().bannerTop||[],r=[...i];await Promise.all(this.fileBanerTop.map((async(e,a)=>{const s=(0,m.iH)(n,`banners/bannerTop/${a}`);await(0,m.KV)(s,e);const t=await(0,m.Jt)(s);r.push(t)}))),(0,k.Vx)(s,{bannerTop:r})},async getBanners(){const e=(0,k.N8)(),n=(0,k.iH)(e,"banners");await new Promise((e=>{(0,k.jM)(n,(n=>{n.exists()?(this.banners=n.val(),this.doneTop=!0,this.banerTop=this.banners.bannerTop):(console.log("Баннер не знайдено"),this.doneTop=!1),e()}))}))}},async mounted(){await this.getBanners()}},w=a(744);const v=(0,w.Z)(T,[["render",f]]);var y=v}}]);
//# sourceMappingURL=675.e0796381.js.map