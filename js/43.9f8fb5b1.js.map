{"version":3,"file":"js/43.9f8fb5b1.js","mappings":"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","sources":["webpack://kinocms/./src/views/Admin/FilmVue.vue","webpack://kinocms/./src/views/Admin/FilmVue.vue?80db"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n    <div class=\"card card-primary\">\r\n      <div class=\"card-header\">\r\n        <h3 class=\"card-title\">Інформація про фільм</h3>\r\n      </div>\r\n      <div>\r\n        <div class=\"card-body\">\r\n          <div class=\"form-group\">\r\n            <label for=\"nameFilm\">Назва фільма</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"nameFilm\"\r\n              v-model=\"film.nameFilm\"\r\n              required\r\n            />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"description\">Опис</label>\r\n            <textarea\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"description\"\r\n              placeholder=\"Текст\"\r\n              v-model=\"film.description\"\r\n              required\r\n            ></textarea>\r\n          </div>\r\n          <div class=\"file-input\">\r\n              <label for=\"holovnaImg\">Головна картинка</label>\r\n              <input type=\"file\" ref=\"fileInput\" class=\"file-input__input\" @change=\"handleFileChange\" v-if=\"film.imageFirst === null\" required>\r\n              <button @click=\"triggerFileInput\" class=\"btn btn-block btn-default\"  v-if=\"film.imageFirst === null\">Добавити</button>\r\n              <div class=\"image-delete_btn\">\r\n                <div class=\"image-delete\">\r\n                  <img :src=\"film.imageFirst\" class=\"imgInput\" v-if=\"film.imageFirst\">\r\n                </div>\r\n                <button @click=\"deleteImageSrc\" class=\"btn btn-block btn-default\"  v-if=\"film.imageFirst !== null\">Видалити</button>\r\n              </div>\r\n          </div>\r\n          <div class=\"file-input\">\r\n              <label for=\"holovnaImg\">Галерея картинок</label>\r\n              <input type=\"file\" ref=\"fileInput2\" class=\"file-input__input\" @change=\"handleFileChange2\" multiple>\r\n              <button @click=\"triggerFileInput2\" class=\"btn btn-block btn-default\" v-if=\"galleryImages == []\">Добавити</button>\r\n              <div class=\"image-delete_btn2\">\r\n                <div class=\"image-delete\" v-for=\"(galleryImg, i) in galleryImages\" :key=\"i\">\r\n                  <img :src=\"galleryImg.url\" class=\"imgInput\" v-if=\"galleryImg\">\r\n                  <span class=\"deleteSpan\" v-if=\"galleryImg\" @click=\"deleteGalleryImg(i)\">x</span>\r\n                </div>\r\n                <button @click=\"triggerFileInput2\" class=\"btn btn-block btn-default\"  v-if=\"galleryImages != []\">Добавити</button>\r\n              </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Посилання на трейлер</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Введіть посилання на трейлер\"\r\n              v-model=\"film.linkTrailer\"\r\n            />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Тип фільма</label>\r\n            <div class=\"form-main\">\r\n              <div class=\"form-check\" v-for=\"(typeFilm, i) in typeFilms\" :key=\"i\" @click=\"pushTypeFilm(typeFilm, i)\">\r\n                <input class=\"form-check-input\" v-model=\"typeFilm.checked\" type=\"checkbox\" :id=\"typeFilm.type\">\r\n                <label class=\"form-check-label\" :for=\"typeFilm.type\">{{ typeFilm.type }}</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Фільм</label>\r\n            <div class=\"form-main\">\r\n              <div class=\"form-check\" v-for=\"(dataFilm, i) in dataFilms\" :key=\"i\">\r\n                <input class=\"form-check-input\" type=\"radio\"\r\n                 :id=\"dataFilm.name\" name=\"name\" :value=\"dataFilm.name\" v-model=\"radioData\">\r\n                <label class=\"form-check-label\" :for=\"dataFilm.name\">{{ dataFilm.name }}</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <h5>SEO блок:</h5>\r\n            <label>URL</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"URL\"\r\n              v-model=\"film.url\"\r\n            />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Title</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Title\"\r\n              v-model=\"film.title\"\r\n            />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Keywords</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"word\"\r\n              v-model=\"film.keywords\"\r\n            />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Description</label>\r\n            <textarea\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Description\"\r\n              v-model=\"film.descriptionSeo\"\r\n            >\r\n            </textarea>\r\n          </div>\r\n        </div>  \r\n        <div v-if=\"showMessage\" class=\"message\">\r\n          {{ message }}\r\n        </div>\r\n        <div class=\"card-footer\">\r\n          <button @click=\"updateFilm\" class=\"btn btn-primary\" type=\"submit\">Оновити</button>\r\n          <button class=\"btn btn-primary\" @click=\"resetFilm\" type=\"button\">Повернути базову версію</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nimport { ref, onMounted   } from 'vue'\r\nimport { getDatabase, ref as dbRef, onValue, update, remove, get } from 'firebase/database'\r\nimport { getStorage, ref as storRef, uploadBytes, getDownloadURL, deleteObject, listAll } from 'firebase/storage'\r\n\r\nexport default {\r\n\r\n    // setup() {\r\n    //   const film = ref({})\r\n    //   const vm = this\r\n\r\n    //   onMounted(async () => {\r\n    //     const movieId = vm.$route.params.id\r\n    //     const db = getDatabase()\r\n    //     const movieRef = dbRef(db, `films/${movieId}`)\r\n    //     const snapshot = await get(movieRef)\r\n    //     film.value = snapshot.val()\r\n    //   })\r\n\r\n    //   return {\r\n    //     film\r\n    //   }\r\n    // }\r\n  \r\n\r\n  data() {\r\n    return {\r\n      film: {},\r\n      originalFilm: {},\r\n      filmId: null,\r\n      typeFilms: [\r\n        {type: '2D', checked: false},\r\n        {type: '3D', checked: false},\r\n        {type: 'IMAX', checked: false},\r\n      ],\r\n      dataFilms: [\r\n        {name: 'Вже вийшов', checked: false},\r\n        {name: 'Скоро вийде', checked: false}\r\n      ],\r\n      fileImgSrc: null,\r\n      message: 'Фільм збережено!',\r\n      showMessage: false,\r\n      fileGalleryImg: [],\r\n      imageSrc2: null,\r\n      galleryImages: [],\r\n      typeFilm: [],\r\n      radioData: '',\r\n      loaded: false,\r\n    };\r\n  },\r\n  async mounted() {\r\n    await this.getFilm();\r\n  },\r\n  methods: {\r\n    async getFilm() {\r\n      const db = getDatabase()\r\n      this.filmId = this.$route.params.id\r\n      const filmRef = dbRef(db, 'films/' + this.filmId);\r\n      await new Promise((resolve) => {\r\n        onValue(filmRef, (snapshot) => {\r\n          if (snapshot.exists()) {\r\n            this.film = snapshot.val();\r\n            this.originalFilm = snapshot.val();\r\n            if (typeof this.film.galleryImages !== 'undefined' && Array.isArray(this.film.galleryImages)) {\r\n              this.galleryImages = this.film.galleryImages;\r\n            } else {\r\n              this.galleryImages = [];\r\n            }\r\n            console.log(this.galleryImages)\r\n          } else {\r\n            console.log('Фільм не знайдено');\r\n          }\r\n          resolve();\r\n        });\r\n      });\r\n      this.updateChecked()\r\n      this.updateRadio() \r\n    },\r\n\r\n    updateChecked() {\r\n      this.typeFilms.forEach(item => {\r\n        if (this.film.typeFilm.includes(item.type)) {\r\n          item.checked = true;\r\n          if(item.checked === true && !this.typeFilm.includes(item.type)){\r\n            this.typeFilm.push(item.type)\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    pushTypeFilm(typeFilm, i){\r\n      if(!this.typeFilm.includes(typeFilm.type) && typeFilm.checked === false){\r\n        this.typeFilm.push(typeFilm.type)\r\n        console.log(this.typeFilm)\r\n      } else if(this.typeFilm.includes(typeFilm.type) && typeFilm.checked === true){\r\n        this.typeFilm.forEach(function (item, index, typeFilms) {\r\n          if (typeFilm.type === item) {\r\n            i = index;\r\n          }\r\n        });\r\n        this.typeFilm.splice(i, 1)\r\n      }\r\n    },\r\n\r\n     updateRadio() {\r\n      this.dataFilms.forEach(item => {\r\n        if (this.film.radioData.includes(item.name)) {\r\n          item.checked = true;\r\n          if(item.checked === true){\r\n            this.radioData = item.name\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    //Головна картинка\r\n    handleFileChange(event){\r\n      this.fileImgSrc = event.target.files[0];\r\n      this.film.imageFirst = URL.createObjectURL(this.fileImgSrc);\r\n    },\r\n    triggerFileInput(){\r\n      this.$refs.fileInput.click();\r\n    },\r\n    deleteImageSrc(){\r\n      this.film.imageFirst = null\r\n    },\r\n\r\n\r\n    //Галерея картинок\r\n\r\n    handleFileChange2(event) {\r\n      this.fileGalleryImg = [...event.target.files]\r\n      for(let image of this.fileGalleryImg){\r\n        const imageSrc2 = URL.createObjectURL(image)\r\n        this.galleryImages.push({\r\n          url: imageSrc2 \r\n        })\r\n      }\r\n    },\r\n    triggerFileInput2(){\r\n      this.$refs.fileInput2.click();\r\n    },\r\n    async deleteGalleryImg(i){\r\n\r\n      let image;\r\n\r\n      this.galleryImages.forEach((img, index) => {\r\n        if(index === i){\r\n          image = img\r\n        } \r\n      });\r\n\r\n      this.galleryImages.splice(i, 1)\r\n\r\n       //Storage\r\n       const storage = getStorage();\r\n          const fileRef = storRef(storage, `films/${this.filmId}/galleryImgs/${image.name}`);\r\n          try {\r\n            await deleteObject(fileRef);\r\n            console.log(`Файл з індексом ${image.name} успішно видалено`);\r\n          } catch (error) {\r\n            console.error(`Помилка видалення файлу з індексом ${image.name}:`, error);\r\n          }\r\n          //BD\r\n          const db = getDatabase();\r\n          const pathDb = `films/${this.filmId}/galleryImages/${i}`\r\n          const itemRef = dbRef(db, pathDb);\r\n  \r\n          await remove(itemRef)\r\n            .then(() => {\r\n              console.log(\"Item successfully deleted from Realtime Database\");\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"Error deleting item from Realtime Database: \", error);\r\n            });\r\n    },\r\n\r\n\r\n\r\n    async updateFilm(){\r\n      const db = getDatabase()\r\n      const storage = getStorage()\r\n\r\n      const pathDb = `films/${this.filmId}`\r\n      const pathStor = `films/${this.filmId}/galleryImgs`\r\n\r\n      const movieRef = dbRef(db, pathDb);\r\n\r\n      // Оновіть дані фільму в базі даних\r\n      update(movieRef, {\r\n        id: movieRef.key,\r\n        nameFilm: this.film.nameFilm,\r\n        description: this.film.description,\r\n        //imageFirst: this.fileImgSrc,\r\n        // galleryImgs: this.fileGalleryImg,\r\n        linkTrailer: this.film.linkTrailer, \r\n        typeFilm: this.typeFilm,\r\n        radioData: this.radioData,\r\n        url: this.film.url,\r\n        title: this.film.title, \r\n        keywords: this.film.keywords,\r\n        descriptionSeo: this.film.descriptionSeo\r\n      });\r\n\r\n      if(this.fileImgSrc){\r\n        update(movieRef, {\r\n          imageFirst: this.fileImgSrc,\r\n        })\r\n      } else{\r\n        update(movieRef, {\r\n          imageFirst: this.film.imageFirst,\r\n        })\r\n      }\r\n\r\n      // Завантажити картинки галереї до Firebase Storage та зберегти посилання на них до фільму в Firebase Realtime Database\r\n      const snapshot = await get(movieRef)\r\n      const oldBannerTop = (snapshot.val() && snapshot.val().galleryImages) || []\r\n      const galleryImages = [...oldBannerTop]\r\n\r\n      await Promise.all(this.fileGalleryImg.map( async(galleryImg) => {\r\n      const name = 'image-' + Date.now() + Math.floor(Math.random() * 1000);\r\n        const storageRef = storRef(storage, `films/${movieRef.key}/galleryImgs/${name}`);\r\n        await uploadBytes(storageRef, galleryImg);\r\n        const url = await getDownloadURL(storageRef);\r\n        galleryImages.push({\r\n          name: name,\r\n          url: url\r\n        });\r\n      }))\r\n\r\n      update(movieRef, {\r\n        galleryImages\r\n      });\r\n\r\n\r\n         // Завантажити головну картинку до Firebase Storage та зберегти посилання на неї до фільму в Firebase Realtime Database\r\n         if (this.fileImgSrc) {\r\n        const storageRef = storRef(storage, `films/${movieRef.key}/imageFirst`);\r\n        uploadBytes(storageRef, this.fileImgSrc).then((snapshot) => {\r\n          getDownloadURL(snapshot.ref).then((url) => {\r\n            update(movieRef, {\r\n              imageFirst: url\r\n            });\r\n          });\r\n        });\r\n      }\r\n\r\n     // Logic to save the film goes here\r\n      this.showMessage = true\r\n      setTimeout(() => {\r\n        this.showMessage = false\r\n      }, 3000)\r\n\r\n      this.$router.push('/films')\r\n\r\n\r\n    },\r\n\r\n    resetFilm(){\r\n      this.film.description = this.originalFilm.description\r\n      this.film.descriptionSeo = this.originalFilm.descriptionSeo\r\n      this.galleryImages = this.originalFilm.galleryImages\r\n      this.film.imageFirst = this.originalFilm.imageFirst\r\n      this.film.keywords = this.originalFilm.keywords\r\n      this.film.linkTrailer = this.originalFilm.linkTrailer\r\n      this.film.nameFilm = this.originalFilm.nameFilm\r\n      this.radioData = this.originalFilm.radioData\r\n      this.film.title = this.originalFilm.title\r\n     // this.typeFilms = this.removeTypeFilms()\r\n      this.typeFilms.forEach(item => {\r\n        item.checked = this.originalFilm.typeFilm.includes(item.type)\r\n      });\r\n      this.film.url = this.originalFilm.url\r\n    },\r\n  },\r\n} \r\n</script>\r\n<style lang=\"scss\">\r\n\r\n.container{\r\n    width: 70%;\r\n}\r\n// input[type=\"file\"] {\r\n//   display: block;\r\n//   opacity: 1;  \r\n// }\r\n\r\n.upload-button {\r\n  display: inline-block;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 12px;\r\n  cursor: pointer;\r\n}\r\n\r\n.upload-preview {\r\n  display: inline-block;\r\n  width: 100px;\r\n  height: 100px;\r\n  border: 1px solid #ccc;\r\n  margin-left: 20px;\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n}\r\nlabel{\r\n  display: block;\r\n  text-align: left;\r\n}\r\n.file-input {\r\n  position: relative;\r\n}\r\n.file-input__input {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  opacity: 0;\r\n  width: 30%;\r\n  height: 70px;\r\n  cursor: pointer;\r\n}\r\n.btn-block {\r\n    display: block;\r\n    width: 30%;\r\n}\r\n.imgInput{\r\n  width: 250px;\r\n  height: 250px;\r\n  display: block;\r\n}\r\n.image-delete_btn{\r\n  display: flex;\r\n  gap: 40px;\r\n  align-items: end;\r\n  margin-bottom: 0.5rem;\r\n}\r\n.image-delete_btn2{\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n  align-items: end;\r\n  margin-bottom: 0.5rem;\r\n}\r\n.deleteSpan{\r\n  position: absolute;\r\n  top: -8px;\r\n  right: -8px;\r\n  border: 1px solid black;\r\n  background: white;\r\n  border-radius: 50%;\r\n  color: black;\r\n  width: 26px;\r\n  cursor: pointer;\r\n}\r\n.image-delete{\r\n  position: relative;\r\n}\r\n.form-main{\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n.form-check-input {\r\n  display: block;\r\n}\r\n.form-group{\r\n\r\n  h5{\r\n    text-align: start;\r\n  }\r\n}\r\n.card-footer{\r\n  display: flex;\r\n  gap: 30px;\r\n  justify-content: center;\r\n}\r\n\r\n                                          /// MESSAGE\r\n\r\n.message {\r\n  position: fixed;\r\n  bottom: 100px;\r\n  right: -40px;\r\n  transform: translateX(-50%);\r\n  background-color: #fff;\r\n  border: 1px solid #ccc;\r\n  padding: 10px;\r\n}\r\n    \r\n</style>","import { render } from \"./FilmVue.vue?vue&type=template&id=7a013b34\"\nimport script from \"./FilmVue.vue?vue&type=script&lang=js\"\nexport * from \"./FilmVue.vue?vue&type=script&lang=js\"\n\nimport \"./FilmVue.vue?vue&type=style&index=0&id=7a013b34&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\MrBin\\\\Desktop\\\\Front\\\\Kino_CMS\\\\kinocms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","for","type","id","film","required","nameFilm","placeholder","description","imageFirst","ref","handleFileChange","triggerFileInput","src","deleteImageSrc","handleFileChange2","multiple","galleryImages","triggerFileInput2","galleryImg","i","key","url","deleteGalleryImg","linkTrailer","typeFilms","typeFilm","pushTypeFilm","checked","dataFilms","dataFilm","name","value","radioData","title","keywords","descriptionSeo","message","updateFilm","resetFilm","data","originalFilm","filmId","fileImgSrc","showMessage","fileGalleryImg","imageSrc2","loaded","async","this","getFilm","methods","db","$route","params","filmRef","Promise","resolve","snapshot","exists","val","Array","isArray","console","log","updateChecked","updateRadio","forEach","item","includes","push","index","splice","event","target","files","URL","createObjectURL","$refs","fileInput","click","image","fileInput2","img","storage","fileRef","error","pathDb","itemRef","then","catch","movieRef","oldBannerTop","all","map","Date","now","Math","floor","random","storageRef","setTimeout","$router","__exports__","render"],"sourceRoot":""}