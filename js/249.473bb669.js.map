{"version":3,"file":"js/249.473bb669.js","mappings":"kMACSA,MAAM,a,GACNA,MAAM,qB,GACT,OAEM,OAFDA,MAAM,eAAa,EACtB,OAAgD,MAA5CA,MAAM,cAAa,0B,MAGlBA,MAAM,a,GACJA,MAAM,c,GACT,OAA0C,SAAnCC,IAAI,YAAW,gBAAY,G,GAS/BD,MAAM,c,GACT,OAAqC,SAA9BC,IAAI,eAAc,QAAI,G,GAU1BD,MAAM,c,GACP,OAAgD,SAAzCC,IAAI,cAAa,oBAAgB,G,GAGnCD,MAAM,oB,GACJA,MAAM,gB,aAMZA,MAAM,c,GACP,OAAgD,SAAzCC,IAAI,cAAa,oBAAgB,G,GAGnCD,MAAM,qB,2BAQVA,MAAM,c,GACT,OAAmC,aAA5B,wBAAoB,G,GAQxBA,MAAM,c,GACT,OAAyB,aAAlB,cAAU,G,GACZA,MAAM,a,0DAORA,MAAM,c,GACT,OAAoB,aAAb,SAAK,G,GACPA,MAAM,a,wCAQRA,MAAM,c,GACT,OAAkB,UAAd,aAAS,G,GACb,OAAkB,aAAX,OAAG,G,GAQPA,MAAM,c,GACT,OAAoB,aAAb,SAAK,G,GAQTA,MAAM,c,GACT,OAAuB,aAAhB,YAAQ,G,GAQZA,MAAM,c,GACT,OAA0B,aAAnB,eAAW,G,SAUEA,MAAM,W,GAGzBA,MAAM,e,GAET,OAAgE,UAAxDA,MAAM,mBAAkB,2BAAuB,G,0CA3H7D,QA+HI,MA/HJ,EA+HI,EA9HJ,OA6HM,MA7HN,EA6HM,CA5HJ,GAGA,OAwHO,QAxHA,SAAM,gCAAU,EAAAE,YAAA,EAAAA,cAAA,IAAU,e,EAC/B,OA+GM,MA/GN,EA+GM,EA9GJ,OASM,MATN,EASM,CARJ,G,SACA,OAME,SALAC,KAAK,OACLH,MAAM,eACNI,GAAG,W,qCACM,EAAAC,KAAa,YACtBC,SAAA,I,iBADS,EAAAD,KAAKE,eAIlB,OAUM,MAVN,EAUM,CATJ,G,SACA,OAOY,YANVJ,KAAK,OACLH,MAAM,eACNI,GAAG,cACHI,YAAY,Q,qCACH,EAAAH,KAAgB,eACzBC,SAAA,I,iBADS,EAAAD,KAAKI,kBAIlB,OAUM,MAVN,EAUM,CATF,EACkH,OAApB,EAAAJ,KAAKK,a,WAAnG,QAAiI,S,MAA1HP,KAAK,OAAOQ,IAAI,YAAYX,MAAM,oBAAqB,SAAM,oBAAE,EAAAY,kBAAA,EAAAA,oBAAA,IAAkDN,SAAA,I,2BACzB,OAApB,EAAAD,KAAKK,a,WAAhF,QAAsH,U,MAA7G,QAAK,oBAAE,EAAAG,kBAAA,EAAAA,oBAAA,IAAkBb,MAAM,6BAA6D,c,gBACrG,OAKM,MALN,EAKM,EAJJ,OAEM,MAFN,EAEM,CAD+C,EAAAK,KAAe,a,WAAlE,QAAoE,O,MAA9DS,IAAK,EAAAT,KAAKK,WAAYV,MAAM,Y,6BAEyD,OAApB,EAAAK,KAAKK,a,WAA9E,QAAoH,U,MAA3G,QAAK,oBAAE,EAAAK,gBAAA,EAAAA,kBAAA,IAAgBf,MAAM,6BAA6D,c,oBAGzG,OAWM,MAXN,EAWM,CAVF,GACA,OAAmG,SAA5FG,KAAK,OAAOQ,IAAI,aAAaX,MAAM,oBAAqB,SAAM,oBAAE,EAAAgB,mBAAA,EAAAA,qBAAA,IAAmBC,SAAA,I,UACf,EAAAC,eAAiB,K,WAA5F,QAAiH,U,MAAxG,QAAK,oBAAE,EAAAC,mBAAA,EAAAA,qBAAA,IAAmBnB,MAAM,6BAAuD,c,gBAChG,OAMM,MANN,EAMM,G,aALJ,QAGM,mBAH8C,EAAAkB,eAAa,CAA/BE,EAAYC,M,WAA9C,QAGM,OAHDrB,MAAM,eAAyDsB,IAAKD,G,CACzBD,I,WAA9C,QAA0D,O,MAApDN,IAAKM,EAAYpB,MAAM,Y,2BACEoB,I,WAA/B,QAAgF,Q,MAA1EpB,MAAM,aAAgC,QAAK,GAAE,EAAAuB,iBAAiBF,IAAI,IAAC,O,0BAEC,EAAAH,eAAiB,K,WAA7F,QAAkH,U,MAAzG,QAAK,oBAAE,EAAAC,mBAAA,EAAAA,qBAAA,IAAmBnB,MAAM,6BAAwD,c,oBAGvG,OAQM,MARN,EAQM,CAPJ,G,SACA,OAKE,SAJAG,KAAK,OACLH,MAAM,eACNQ,YAAY,+B,qCACH,EAAAH,KAAgB,gB,iBAAhB,EAAAA,KAAKmB,kBAGlB,OAQM,MARN,EAQM,CAPJ,GACA,OAKM,MALN,EAKM,G,aAJJ,QAGM,mBAH0C,EAAAC,WAAS,CAAzBC,EAAUL,M,WAA1C,QAGM,OAHDrB,MAAM,aAAiDsB,IAAKD,EAAI,QAAK,GAAE,EAAAM,aAAaD,EAAUL,I,WACjG,OAA+F,SAAxFrB,MAAM,mB,yBAA4B0B,EAAgB,UAAEvB,KAAK,WAAYC,GAAIsB,EAASvB,M,iBAAhDuB,EAASE,YAClD,OAAgF,SAAzE5B,MAAM,mBAAoBC,IAAKyB,EAASvB,O,QAASuB,EAASvB,MAAI,M,mBAI3E,OASM,MATN,EASM,CARJ,GACA,OAMM,MANN,EAMM,G,aALJ,QAIM,mBAJ0C,EAAA0B,WAAS,CAAzBC,EAAUT,M,WAA1C,QAIM,OAJDrB,MAAM,aAAiDsB,IAAKD,G,EAC/D,OACqF,SAD9ErB,MAAM,mBAAmBG,KAAK,QACnCC,GAAI0B,EAASC,KAAMA,KAAK,OAAQC,MAAOF,EAASC,KAAOH,QAASE,EAASF,S,WAC3E,OAAgF,SAAzE5B,MAAM,mBAAoBC,IAAK6B,EAASC,O,QAASD,EAASC,MAAI,U,WAI3E,OASM,MATN,EASM,CARJ,EACA,G,SACA,OAKE,SAJA5B,KAAK,OACLH,MAAM,eACNQ,YAAY,M,qCACH,EAAAH,KAAQ,Q,iBAAR,EAAAA,KAAK4B,UAGlB,OAQM,MARN,EAQM,CAPJ,G,SACA,OAKE,SAJA9B,KAAK,OACLH,MAAM,eACNQ,YAAY,Q,uCACH,EAAAH,KAAU,U,iBAAV,EAAAA,KAAK6B,YAGlB,OAQM,MARN,EAQM,CAPJ,G,SACA,OAKE,SAJA/B,KAAK,OACLH,MAAM,eACNQ,YAAY,O,uCACH,EAAAH,KAAa,a,iBAAb,EAAAA,KAAK8B,eAGlB,OASM,MATN,EASM,CARJ,G,SACA,OAMW,YALThC,KAAK,OACLH,MAAM,eACNQ,YAAY,c,uCACH,EAAAH,KAAmB,mBAC7B,mBACD,M,MAFW,EAAAA,KAAK+B,sBAKT,EAAW,c,WAAtB,QAEM,MAFN,GAEM,QADD,EAAAC,SAAO,K,gBAEZ,OAGM,MAHN,EAGM,EAFJ,OAAoE,UAA3D,QAAK,sBAAE,EAAAnC,YAAA,EAAAA,cAAA,IAAYF,MAAM,mBAAkB,WACpD,K,8BAcV,GAoBEsC,OACE,MAAO,CACLjC,KAAM,CAAC,EACPkC,OAAQ,KACRd,UAAW,CACT,CAACtB,KAAM,KAAMyB,SAAS,GACtB,CAACzB,KAAM,KAAMyB,SAAS,GACtB,CAACzB,KAAM,OAAQyB,SAAS,IAE1BC,UAAW,CACT,CAACE,KAAM,aAAcH,SAAS,GAC9B,CAACG,KAAM,cAAeH,SAAS,IAEjCY,WAAY,KACZH,QAAS,mBACTI,aAAa,EACbC,eAAgB,GAChBC,UAAW,KACXzB,cAAe,GAEnB,EACA0B,UACEC,KAAKC,UACLD,KAAKE,gBACLF,KAAKG,aACP,EACAC,QAAS,CACPH,UACE,MAAMI,GAAK,UACXL,KAAKN,OAASM,KAAKM,OAAOC,OAAOhD,GACjC,MAAMiD,GAAU,QAAMH,EAAI,SAAWL,KAAKN,SAC1C,QAAQc,GAAUC,IAChB,GAAIA,EAASC,SAAU,CACrBV,KAAKxC,KAAOiD,EAASE,MACrB,MAAMC,EAAQZ,KAAKxC,KAAKa,cACxB2B,KAAK3B,cAAgBuC,CACvB,MACEC,QAAQC,IAAI,oBACd,GAEJ,EAEAZ,gBACEF,KAAKpB,UAAUmC,SAAQC,IACjBhB,KAAKxC,KAAKqB,SAASoC,SAASD,EAAK1D,QACnC0D,EAAKjC,SAAU,EACjB,GAEJ,EAECoB,cACCH,KAAKhB,UAAU+B,SAAQC,IACjBhB,KAAKxC,KAAK0D,UAAUD,SAASD,EAAK9B,QACpC8B,EAAKjC,SAAU,EACjB,GAEJ,EAGAhB,iBAAiBoD,GACfnB,KAAKL,WAAawB,EAAMC,OAAOC,MAAM,GACrCrB,KAAKxC,KAAKK,WAAayD,IAAIC,gBAAgBvB,KAAKL,WAClD,EACA3B,mBACEgC,KAAKwB,MAAMC,UAAUC,OACvB,EACAxD,iBACE8B,KAAKxC,KAAKK,WAAa,IACzB,EAKAM,kBAAkBgD,GAChBnB,KAAKH,eAAiB,IAAIsB,EAAMC,OAAOC,OACvC,IAAI,IAAIM,KAAS3B,KAAKH,eACpBG,KAAKF,UAAYwB,IAAIC,gBAAgBI,GACrC3B,KAAK3B,cAAcuD,KAAK5B,KAAKF,UAEjC,EACAxB,oBACE0B,KAAKwB,MAAMK,WAAWH,OACxB,EACAhD,iBAAiBF,GACfwB,KAAK3B,cAAcyD,OAAOtD,EAAG,GAC7BqC,QAAQC,IAAKd,KAAKxC,KAAKa,cAAc0D,OAEvC,EAIA1E,aACE,MAAMgD,GAAK,UACL2B,GAAU,UAEVC,EAAS,SAASjC,KAAKN,SACvBwC,EAAW,SAASlC,KAAKN,qBAEzByC,GAAW,QAAM9B,EAAI4B,GA6B3B,IA1BA,QAAOE,EAAU,CACf5E,GAAI4E,EAAS1D,IACbf,SAAUsC,KAAKxC,KAAKE,SACpBE,YAAaoC,KAAKxC,KAAKI,YAGvBe,YAAaqB,KAAKxC,KAAKmB,YAGvBS,IAAKY,KAAKxC,KAAK4B,IACfC,MAAOW,KAAKxC,KAAK6B,MACjBC,SAAUU,KAAKxC,KAAK8B,SACpBC,eAAgBS,KAAKxC,KAAK+B,iBAGzBS,KAAKL,YACN,QAAOwC,EAAU,CACftE,WAAYmC,KAAKL,cAGnB,QAAOwC,EAAU,CACftE,WAAYmC,KAAKxC,KAAKK,aAKvBmC,KAAK3B,cAAc0D,QAAU/B,KAAKxC,KAAKa,cAAc0D,OAAO,CAG/D,MAAMK,GAAgB,QAAQJ,EAASE,IAEvC,QAAQE,GAAeC,MAAMC,IAC7BA,EAAOC,MAAMxB,SAASyB,KAEpB,QAAaA,GAAUH,MAAK,KAC1BxB,QAAQC,IAAI,cAAc0B,EAAStD,8BAA8B,IAChEuD,OAAOC,IACR7B,QAAQC,IAAI,4CAA4C0B,EAAStD,QAASwD,EAAM,GAChF,GACF,IAGF,MAAMC,EAAa,SAAS3C,KAAKN,uBAC3BkD,GAAU,QAAMvC,EAAIsC,IAC1B,QAAOC,GACJP,MAAK,KACJxB,QAAQC,IAAI,mDAAmD,IAEhE2B,OAAOC,IACN7B,QAAQC,IAAI,+CAAgD4B,EAAM,KAGpE,QAAOP,EAAU,CACfU,YAAa7C,KAAKH,iBAItB,MAAMxB,EAAgB,GAEpB2B,KAAKH,eAAekB,SAAQ,CAACxC,EAAYuE,KACvC,MAAMC,GAAa,QAAQf,EAAS,SAASG,EAAS1D,mBAAmBqE,MACzE,QAAYC,EAAYxE,GAAY8D,MAAM5B,KACxC,QAAeA,EAAS3C,KAAKuE,MAAMjD,IACjCf,EAAcyE,GAAS1D,EACnBf,EAAc0D,SAAW/B,KAAKH,eAAekC,SAC/C,QAAOI,EAAU,CACf9D,iBAEJ,GACA,GACF,GAEN,CAIG,GAAI2B,KAAKL,WAAY,CACtB,MAAMoD,GAAa,QAAQf,EAAS,SAASG,EAAS1D,mBACtD,QAAYsE,EAAY/C,KAAKL,YAAY0C,MAAM5B,KAC7C,QAAeA,EAAS3C,KAAKuE,MAAMjD,KACjC,QAAO+C,EAAU,CACftE,WAAYuB,GACZ,GACF,GAEN,CAMAY,KAAKJ,aAAc,EACnBoD,YAAW,KACThD,KAAKJ,aAAc,IAClB,IACL,I,SC3VJ,MAAMqD,IAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,S","sources":["webpack://kinocms/./src/views/Admin/FilmVue.vue","webpack://kinocms/./src/views/Admin/FilmVue.vue?80db"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n    <div class=\"card card-primary\">\r\n      <div class=\"card-header\">\r\n        <h3 class=\"card-title\">Інформація про фільм</h3>\r\n      </div>\r\n      <form @submit.prevent=\"updateFilm\">\r\n        <div class=\"card-body\">\r\n          <div class=\"form-group\">\r\n            <label for=\"nameFilm\">Назва фільма</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"nameFilm\"\r\n              v-model=\"film.nameFilm\"\r\n              required\r\n            />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"description\">Опис</label>\r\n            <textarea\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"description\"\r\n              placeholder=\"Текст\"\r\n              v-model=\"film.description\"\r\n              required\r\n            ></textarea>\r\n          </div>\r\n          <div class=\"file-input\">\r\n              <label for=\"holovnaImg\">Головна картинка</label>\r\n              <input type=\"file\" ref=\"fileInput\" class=\"file-input__input\" @change=\"handleFileChange\" v-if=\"film.imageFirst === null\" required>\r\n              <button @click=\"triggerFileInput\" class=\"btn btn-block btn-default\"  v-if=\"film.imageFirst === null\">Добавити</button>\r\n              <div class=\"image-delete_btn\">\r\n                <div class=\"image-delete\">\r\n                  <img :src=\"film.imageFirst\" class=\"imgInput\" v-if=\"film.imageFirst\">\r\n                </div>\r\n                <button @click=\"deleteImageSrc\" class=\"btn btn-block btn-default\"  v-if=\"film.imageFirst !== null\">Видалити</button>\r\n              </div>\r\n          </div>\r\n          <div class=\"file-input\">\r\n              <label for=\"holovnaImg\">Галерея картинок</label>\r\n              <input type=\"file\" ref=\"fileInput2\" class=\"file-input__input\" @change=\"handleFileChange2\" multiple>\r\n              <button @click=\"triggerFileInput2\" class=\"btn btn-block btn-default\" v-if=\"galleryImages == []\">Добавити</button>\r\n              <div class=\"image-delete_btn2\">\r\n                <div class=\"image-delete\" v-for=\"(galleryImg, i) in galleryImages\" :key=\"i\">\r\n                  <img :src=\"galleryImg\" class=\"imgInput\" v-if=\"galleryImg\">\r\n                  <span class=\"deleteSpan\" v-if=\"galleryImg\" @click=\"deleteGalleryImg(i)\">x</span>\r\n                </div>\r\n                <button @click=\"triggerFileInput2\" class=\"btn btn-block btn-default\"  v-if=\"galleryImages != []\">Добавити</button>\r\n              </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Посилання на трейлер</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Введіть посилання на трейлер\"\r\n              v-model=\"film.linkTrailer\"\r\n            />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Тип фільма</label>\r\n            <div class=\"form-main\">\r\n              <div class=\"form-check\" v-for=\"(typeFilm, i) in typeFilms\" :key=\"i\" @click=\"pushTypeFilm(typeFilm, i)\">\r\n                <input class=\"form-check-input\" v-model=\"typeFilm.checked\" type=\"checkbox\" :id=\"typeFilm.type\">\r\n                <label class=\"form-check-label\" :for=\"typeFilm.type\">{{ typeFilm.type }}</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Фільм</label>\r\n            <div class=\"form-main\">\r\n              <div class=\"form-check\" v-for=\"(dataFilm, i) in dataFilms\" :key=\"i\">\r\n                <input class=\"form-check-input\" type=\"radio\"\r\n                 :id=\"dataFilm.name\" name=\"name\" :value=\"dataFilm.name\" :checked=\"dataFilm.checked\" >\r\n                <label class=\"form-check-label\" :for=\"dataFilm.name\">{{ dataFilm.name }}</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <h5>SEO блок:</h5>\r\n            <label>URL</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"URL\"\r\n              v-model=\"film.url\"\r\n            />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Title</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Title\"\r\n              v-model=\"film.title\"\r\n            />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Keywords</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"word\"\r\n              v-model=\"film.keywords\"\r\n            />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Description</label>\r\n            <textarea\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Description\"\r\n              v-model=\"film.descriptionSeo\"\r\n            >\r\n            </textarea>\r\n          </div>\r\n        </div>  \r\n        <div v-if=\"showMessage\" class=\"message\">\r\n          {{ message }}\r\n        </div>\r\n        <div class=\"card-footer\">\r\n          <button @click=\"updateFilm\" class=\"btn btn-primary\">Оновити</button>\r\n          <button class=\"btn btn-primary\">Повернути базову версію</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nimport { ref, onMounted   } from 'vue'\r\nimport { getDatabase, ref as dbRef, onValue, update, remove } from 'firebase/database'\r\nimport { getStorage, ref as storRef, uploadBytes, getDownloadURL, deleteObject, listAll } from 'firebase/storage'\r\n\r\nexport default {\r\n\r\n    // setup() {\r\n    //   const film = ref({})\r\n    //   const vm = this\r\n\r\n    //   onMounted(async () => {\r\n    //     const movieId = vm.$route.params.id\r\n    //     const db = getDatabase()\r\n    //     const movieRef = dbRef(db, `films/${movieId}`)\r\n    //     const snapshot = await get(movieRef)\r\n    //     film.value = snapshot.val()\r\n    //   })\r\n\r\n    //   return {\r\n    //     film\r\n    //   }\r\n    // }\r\n  \r\n\r\n  data() {\r\n    return {\r\n      film: {},\r\n      filmId: null,\r\n      typeFilms: [\r\n        {type: '2D', checked: false},\r\n        {type: '3D', checked: false},\r\n        {type: 'IMAX', checked: false},\r\n      ],\r\n      dataFilms: [\r\n        {name: 'Вже вийшов', checked: false},\r\n        {name: 'Скоро вийде', checked: false}\r\n      ],\r\n      fileImgSrc: null,\r\n      message: 'Фільм збережено!',\r\n      showMessage: false,\r\n      fileGalleryImg: [],\r\n      imageSrc2: null,\r\n      galleryImages: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getFilm();\r\n    this.updateChecked()\r\n    this.updateRadio() \r\n  },\r\n  methods: {\r\n    getFilm() {\r\n      const db = getDatabase()\r\n      this.filmId = this.$route.params.id\r\n      const filmRef = dbRef(db, 'films/' + this.filmId);\r\n      onValue(filmRef, (snapshot) => {\r\n        if (snapshot.exists()) {\r\n          this.film = snapshot.val();\r\n          const array = this.film.galleryImages\r\n          this.galleryImages = array\r\n        } else {\r\n          console.log('Фільм не знайдено');\r\n        }\r\n      });\r\n    },\r\n\r\n    updateChecked() {\r\n      this.typeFilms.forEach(item => {\r\n        if (this.film.typeFilm.includes(item.type)) {\r\n          item.checked = true;\r\n        }\r\n      });\r\n    },\r\n\r\n     updateRadio() {\r\n      this.dataFilms.forEach(item => {\r\n        if (this.film.radioData.includes(item.name)) {\r\n          item.checked = true;\r\n        }\r\n      });\r\n    },\r\n\r\n    //Головна картинка\r\n    handleFileChange(event){\r\n      this.fileImgSrc = event.target.files[0];\r\n      this.film.imageFirst = URL.createObjectURL(this.fileImgSrc);\r\n    },\r\n    triggerFileInput(){\r\n      this.$refs.fileInput.click();\r\n    },\r\n    deleteImageSrc(){\r\n      this.film.imageFirst = null\r\n    },\r\n\r\n\r\n    //Галерея картинок\r\n\r\n    handleFileChange2(event) {\r\n      this.fileGalleryImg = [...event.target.files]\r\n      for(let image of this.fileGalleryImg){\r\n        this.imageSrc2 = URL.createObjectURL(image)\r\n        this.galleryImages.push(this.imageSrc2)\r\n      }\r\n    },\r\n    triggerFileInput2(){\r\n      this.$refs.fileInput2.click();\r\n    },\r\n    deleteGalleryImg(i){\r\n      this.galleryImages.splice(i, 1)\r\n      console.log( this.film.galleryImages.length)\r\n\r\n    },\r\n\r\n\r\n\r\n    updateFilm(){\r\n      const db = getDatabase()\r\n      const storage = getStorage()\r\n\r\n      const pathDb = `films/${this.filmId}`\r\n      const pathStor = `films/${this.filmId}/galleryImgs`\r\n\r\n      const movieRef = dbRef(db, pathDb);\r\n\r\n      // Оновіть дані фільму в базі даних\r\n      update(movieRef, {\r\n        id: movieRef.key,\r\n        nameFilm: this.film.nameFilm,\r\n        description: this.film.description,\r\n        //imageFirst: this.fileImgSrc,\r\n        // galleryImgs: this.fileGalleryImg,\r\n        linkTrailer: this.film.linkTrailer, \r\n        // typeFilm: this.typeFilm,\r\n        // radioData: this.radioData,\r\n        url: this.film.url,\r\n        title: this.film.title, \r\n        keywords: this.film.keywords,\r\n        descriptionSeo: this.film.descriptionSeo\r\n      });\r\n\r\n      if(this.fileImgSrc){\r\n        update(movieRef, {\r\n          imageFirst: this.fileImgSrc,\r\n        })\r\n      } else{\r\n        update(movieRef, {\r\n          imageFirst: this.film.imageFirst,\r\n        })\r\n      }\r\n\r\n\r\n      if(this.galleryImages.length != this.film.galleryImages.length){\r\n\r\n        // Видалення фотографій фільму\r\n      const filmPhotosRef = storRef(storage, pathStor);\r\n\r\n      listAll(filmPhotosRef).then((result) => {\r\n      result.items.forEach((imageRef) => {\r\n        // Видаляємо кожну фотографію\r\n        deleteObject(imageRef).then(() => {\r\n          console.log(`Фотографія ${imageRef.name} була успішно видалена!`);\r\n        }).catch((error) => {\r\n          console.log(`Сталася помилка при видаленні фотографії ${imageRef.name}:`, error);\r\n        });\r\n      });\r\n      });\r\n\r\n      const pathGalImg = `films/${this.filmId}/galleryImages`\r\n      const itemRef = dbRef(db, pathGalImg);\r\n      remove(itemRef)\r\n        .then(() => {\r\n          console.log(\"Item successfully deleted from Realtime Database\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error deleting item from Realtime Database: \", error);\r\n        });\r\n\r\n        update(movieRef, {\r\n          galleryImgs: this.fileGalleryImg,\r\n        })\r\n\r\n      // Завантажити картинки галереї до Firebase Storage та зберегти посилання на них до фільму в Firebase Realtime Database\r\n      const galleryImages = [];\r\n\r\n        this.fileGalleryImg.forEach((galleryImg, index) => {\r\n          const storageRef = storRef(storage, `films/${movieRef.key}/galleryImgs/${index}`);\r\n          uploadBytes(storageRef, galleryImg).then((snapshot) => {\r\n            getDownloadURL(snapshot.ref).then((url) => {\r\n              galleryImages[index] = url;\r\n              if (galleryImages.length === this.fileGalleryImg.length) {\r\n                update(movieRef, {\r\n                  galleryImages\r\n                });\r\n              }\r\n            });\r\n          });\r\n        })\r\n      }\r\n\r\n\r\n         // Завантажити головну картинку до Firebase Storage та зберегти посилання на неї до фільму в Firebase Realtime Database\r\n         if (this.fileImgSrc) {\r\n        const storageRef = storRef(storage, `films/${movieRef.key}/imageFirst`);\r\n        uploadBytes(storageRef, this.fileImgSrc).then((snapshot) => {\r\n          getDownloadURL(snapshot.ref).then((url) => {\r\n            update(movieRef, {\r\n              imageFirst: url\r\n            });\r\n          });\r\n        });\r\n      }\r\n\r\n      \r\n\r\n\r\n      // Logic to save the film goes here\r\n      this.showMessage = true\r\n      setTimeout(() => {\r\n        this.showMessage = false\r\n      }, 3000)\r\n    }\r\n  },\r\n} \r\n</script>\r\n<style lang=\"scss\">\r\n\r\n.container{\r\n    width: 70%;\r\n}\r\n// input[type=\"file\"] {\r\n//   display: block;\r\n//   opacity: 1;  \r\n// }\r\n\r\n.upload-button {\r\n  display: inline-block;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 12px;\r\n  cursor: pointer;\r\n}\r\n\r\n.upload-preview {\r\n  display: inline-block;\r\n  width: 100px;\r\n  height: 100px;\r\n  border: 1px solid #ccc;\r\n  margin-left: 20px;\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n}\r\nlabel{\r\n  display: block;\r\n  text-align: left;\r\n}\r\n.file-input {\r\n  position: relative;\r\n}\r\n.file-input__input {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  opacity: 0;\r\n  width: 30%;\r\n  height: 70px;\r\n  cursor: pointer;\r\n}\r\n.btn-block {\r\n    display: block;\r\n    width: 30%;\r\n}\r\n.imgInput{\r\n  width: 250px;\r\n  height: 250px;\r\n  display: block;\r\n}\r\n.image-delete_btn{\r\n  display: flex;\r\n  gap: 40px;\r\n  align-items: end;\r\n  margin-bottom: 0.5rem;\r\n}\r\n.image-delete_btn2{\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n  align-items: end;\r\n  margin-bottom: 0.5rem;\r\n}\r\n.deleteSpan{\r\n  position: absolute;\r\n  top: -8px;\r\n  right: -8px;\r\n  border: 1px solid black;\r\n  background: white;\r\n  border-radius: 50%;\r\n  color: black;\r\n  width: 26px;\r\n  cursor: pointer;\r\n}\r\n.image-delete{\r\n  position: relative;\r\n}\r\n.form-main{\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n.form-check-input {\r\n  display: block;\r\n}\r\n.form-group{\r\n\r\n  h5{\r\n    text-align: start;\r\n  }\r\n}\r\n.card-footer{\r\n  display: flex;\r\n  gap: 30px;\r\n  justify-content: center;\r\n}\r\n\r\n                                          /// MESSAGE\r\n\r\n.message {\r\n  position: fixed;\r\n  bottom: 100px;\r\n  right: -40px;\r\n  transform: translateX(-50%);\r\n  background-color: #fff;\r\n  border: 1px solid #ccc;\r\n  padding: 10px;\r\n}\r\n    \r\n</style>","import { render } from \"./FilmVue.vue?vue&type=template&id=c6d4e596\"\nimport script from \"./FilmVue.vue?vue&type=script&lang=js\"\nexport * from \"./FilmVue.vue?vue&type=script&lang=js\"\n\nimport \"./FilmVue.vue?vue&type=style&index=0&id=c6d4e596&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\MrBin\\\\Desktop\\\\Front\\\\Kino_CMS\\\\kinocms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","for","updateFilm","type","id","film","required","nameFilm","placeholder","description","imageFirst","ref","handleFileChange","triggerFileInput","src","deleteImageSrc","handleFileChange2","multiple","galleryImages","triggerFileInput2","galleryImg","i","key","deleteGalleryImg","linkTrailer","typeFilms","typeFilm","pushTypeFilm","checked","dataFilms","dataFilm","name","value","url","title","keywords","descriptionSeo","message","data","filmId","fileImgSrc","showMessage","fileGalleryImg","imageSrc2","mounted","this","getFilm","updateChecked","updateRadio","methods","db","$route","params","filmRef","snapshot","exists","val","array","console","log","forEach","item","includes","radioData","event","target","files","URL","createObjectURL","$refs","fileInput","click","image","push","fileInput2","splice","length","storage","pathDb","pathStor","movieRef","filmPhotosRef","then","result","items","imageRef","catch","error","pathGalImg","itemRef","galleryImgs","index","storageRef","setTimeout","__exports__","render"],"sourceRoot":""}