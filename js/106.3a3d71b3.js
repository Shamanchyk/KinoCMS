"use strict";(self["webpackChunkkinocms"]=self["webpackChunkkinocms"]||[]).push([[106],{106:function(e,l,t){t.r(l),t.d(l,{default:function(){return P}});var n=t(252),a=t(963);const i={class:"container"},o={class:"card card-primary"},s=(0,n._)("div",{class:"card-header"},[(0,n._)("h3",{class:"card-title"},"Добавити зал")],-1),r={class:"card-body"},c={class:"form-group"},g=(0,n._)("label",{for:"nameCinema"},"Назва зала",-1),m={class:"form-group"},d=(0,n._)("label",{for:"dataHall"},"Дата створення",-1),u={class:"form-group"},p=(0,n._)("label",{for:"description"},"Опис",-1),h={class:"file-input"},f=(0,n._)("label",{for:"holovnaImg"},"Схема зала",-1),b={class:"image-delete_btn"},y={class:"image-delete"},k=["src"],_={class:"file-input"},w=(0,n._)("label",{for:"holovnaImg"},"Верхній банер",-1),C={class:"image-delete_btn"},v={class:"image-delete"},L=["src"],F={class:"file-input"},I=(0,n._)("label",{for:"holovnaImg"},"Галерея картинок",-1),H={class:"image-delete_btn2"},D=["src"],U=["onClick"],q={class:"form-group"},S=(0,n._)("h5",null,"SEO блок:",-1),x=(0,n._)("label",null,"URL",-1),B={class:"form-group"},V=(0,n._)("label",null,"Title",-1),$={class:"form-group"},R=(0,n._)("label",null,"Keywords",-1),G={class:"form-group"},K=(0,n._)("label",null,"Description",-1),O={class:"card-footer"};function j(e,l,t,j,M,J){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",o,[s,(0,n._)("form",{onSubmit:l[17]||(l[17]=(0,a.iM)(((...e)=>J.saveHall&&J.saveHall(...e)),["prevent"]))},[(0,n._)("div",r,[(0,n._)("div",c,[g,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"nameCinema",placeholder:"Введіть назву зала","onUpdate:modelValue":l[0]||(l[0]=e=>M.nameHall=e),required:""},null,512),[[a.nr,M.nameHall]])]),(0,n._)("div",m,[d,(0,n.wy)((0,n._)("input",{type:"date",class:"form-date",id:"dataHall","onUpdate:modelValue":l[1]||(l[1]=e=>M.dateHall=e),required:""},null,512),[[a.nr,M.dateHall]])]),(0,n._)("div",u,[p,(0,n.wy)((0,n._)("textarea",{type:"text",class:"form-control",id:"description",placeholder:"Текст","onUpdate:modelValue":l[2]||(l[2]=e=>M.description=e)},null,512),[[a.nr,M.description]])]),(0,n._)("div",h,[f,null===M.cinemaLogo?((0,n.wg)(),(0,n.iD)("input",{key:0,type:"file",ref:"cinemaLogo",class:"file-input__input",onChange:l[3]||(l[3]=(...e)=>J.changeFileCinema&&J.changeFileCinema(...e))},null,544)):(0,n.kq)("",!0),null===M.cinemaLogo?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:l[4]||(l[4]=(...e)=>J.triggerCinemaLogo&&J.triggerCinemaLogo(...e)),class:"btn btn-block btn-default"},"Добавити")):(0,n.kq)("",!0),(0,n._)("div",b,[(0,n._)("div",y,[M.cinemaLogo?((0,n.wg)(),(0,n.iD)("img",{key:0,src:M.cinemaLogo,class:"imgInput"},null,8,k)):(0,n.kq)("",!0)]),null!==M.cinemaLogo?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:l[5]||(l[5]=(...e)=>J.deleteCinemaLogo&&J.deleteCinemaLogo(...e)),class:"btn btn-block btn-default"},"Видалити")):(0,n.kq)("",!0)])]),(0,n._)("div",_,[w,null===M.bannerFoto?((0,n.wg)(),(0,n.iD)("input",{key:0,type:"file",ref:"bannerFoto",class:"file-input__input",onChange:l[6]||(l[6]=(...e)=>J.changeFileBanner&&J.changeFileBanner(...e))},null,544)):(0,n.kq)("",!0),null===M.bannerFoto?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:l[7]||(l[7]=(...e)=>J.triggerBannerFoto&&J.triggerBannerFoto(...e)),class:"btn btn-block btn-default"},"Добавити")):(0,n.kq)("",!0),(0,n._)("div",C,[(0,n._)("div",v,[M.bannerFoto?((0,n.wg)(),(0,n.iD)("img",{key:0,src:M.bannerFoto,class:"imgInput"},null,8,L)):(0,n.kq)("",!0)]),null!==M.bannerFoto?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:l[8]||(l[8]=(...l)=>e.deleteBannerFoto&&e.deleteBannerFoto(...l)),class:"btn btn-block btn-default"},"Видалити")):(0,n.kq)("",!0)])]),(0,n._)("div",F,[I,(0,n._)("input",{type:"file",ref:"fileInput2",class:"file-input__input",onChange:l[9]||(l[9]=(...e)=>J.handleFileChange2&&J.handleFileChange2(...e)),multiple:""},null,544),M.galleryImgs==[]?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:l[10]||(l[10]=(...e)=>J.triggerFileInput2&&J.triggerFileInput2(...e)),class:"btn btn-block btn-default"},"Добавити")):(0,n.kq)("",!0),(0,n._)("div",H,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(M.galleryImgs,((e,l)=>((0,n.wg)(),(0,n.iD)("div",{class:"image-delete",key:l},[e?((0,n.wg)(),(0,n.iD)("img",{key:0,src:e,class:"imgInput"},null,8,D)):(0,n.kq)("",!0),e?((0,n.wg)(),(0,n.iD)("span",{key:1,class:"deleteSpan",onClick:e=>J.deleteGalleryImg(l)},"x",8,U)):(0,n.kq)("",!0)])))),128)),M.galleryImgs!=[]?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:l[11]||(l[11]=(...e)=>J.triggerFileInput2&&J.triggerFileInput2(...e)),class:"btn btn-block btn-default"},"Добавити")):(0,n.kq)("",!0)])]),(0,n._)("div",q,[S,x,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"URL","onUpdate:modelValue":l[12]||(l[12]=e=>M.url=e)},null,512),[[a.nr,M.url]])]),(0,n._)("div",B,[V,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"Title","onUpdate:modelValue":l[13]||(l[13]=e=>M.title=e)},null,512),[[a.nr,M.title]])]),(0,n._)("div",$,[R,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"word","onUpdate:modelValue":l[14]||(l[14]=e=>M.keywords=e)},null,512),[[a.nr,M.keywords]])]),(0,n._)("div",G,[K,(0,n.wy)((0,n._)("textarea",{type:"text",class:"form-control",placeholder:"Description","onUpdate:modelValue":l[15]||(l[15]=e=>M.descriptionSeo=e)},"\r\n              ",512),[[a.nr,M.descriptionSeo]])])]),(0,n._)("div",O,[(0,n._)("button",{onClick:l[16]||(l[16]=(...e)=>J.saveHall&&J.saveHall(...e)),class:"btn btn-primary"},"Зберегти")])],32)])])}var M=t(355),J=t(650),T={setup(){},props:{nameCinema:{type:String,required:!0}},data(){return{nameHall:"",description:"",dateHall:null,cinemaLogo:null,fileCinemaLogo:null,bannerFoto:null,fileBannerFoto:null,galleryImgs:[],url:"",title:"",keywords:"",descriptionSeo:"",fileImgSrc:null,fileGalleryImg:[]}},methods:{changeFileCinema(e){this.fileCinemaLogo=e.target.files[0],this.cinemaLogo=URL.createObjectURL(this.fileCinemaLogo)},triggerCinemaLogo(){this.$refs.cinemaLogo.click()},changeFileBanner(e){this.fileBannerFoto=e.target.files[0],this.bannerFoto=URL.createObjectURL(this.fileBannerFoto)},triggerBannerFoto(){this.$refs.bannerFoto.click()},handleFileChange2(e){this.fileGalleryImg=[...e.target.files];for(let l of this.fileGalleryImg)this.imageSrc2=URL.createObjectURL(l),this.galleryImgs.push(this.imageSrc2)},triggerFileInput2(){this.$refs.fileInput2.click()},deleteCinemaLogo(){this.cinemaLogo=null},deleteGalleryImg(e){this.galleryImgs.splice(e,1)},async saveHall(){const e=(0,M.N8)(),l=(0,J.cF)(),t=`cinemas/${this.nameCinema}/halls/${this.nameHall}`,n=(0,M.iH)(e,t);if((0,M.t8)(n,{id:n.key,name:this.nameHall,date:this.dateHall,description:this.description,cinemaLogo:this.cinemaLogo,url:this.url,title:this.title,keywords:this.keywords,descriptionSeo:this.descriptionSeo}),this.fileCinemaLogo){const e=(0,J.iH)(l,`cinemas/${this.nameCinema}/hallLogo`);(0,J.KV)(e,this.fileCinemaLogo).then((e=>{(0,J.Jt)(e.ref).then((e=>{(0,M.Vx)(n,{cinemaLogo:e})}))}))}const a=await(0,M.U2)(n),i=a.val()&&a.val().galleryImages||[],o=[...i];await Promise.all(this.fileGalleryImg.map((async e=>{const t="image-"+Date.now()+Math.floor(1e3*Math.random()),n=(0,J.iH)(l,`cinemas/${this.nameCinema}/galleryImgsHalls/${this.nameHall}/${t}`);await(0,J.KV)(n,e);const a=await(0,J.Jt)(n);o.push({name:t,url:a})}))),(0,M.Vx)(n,{galleryImages:o}),this.$router.push("theatres"),this.nameHall="",this.dateHall=null,this.description="",this.cinemaLogo=null,this.bannerFoto=null,this.galleryImgs=[],this.url="",this.title="",this.keywords="",this.descriptionSeo=""}}},E=t(744);const N=(0,E.Z)(T,[["render",j]]);var P=N}}]);
//# sourceMappingURL=106.3a3d71b3.js.map