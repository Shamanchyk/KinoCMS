"use strict";(self["webpackChunkkinocms"]=self["webpackChunkkinocms"]||[]).push([[818],{818:function(e,n,a){a.r(n),a.d(n,{default:function(){return F}});var t=a(252),s=a(963),i=a(577);const l={class:"container"},r={class:"card card-primary"},o=(0,t._)("div",{class:"card-header"},[(0,t._)("h3",{class:"card-title"},"На головній сторінці зверху")],-1),c={class:"card-body"},p={key:0,class:"file-input"},g={key:1,class:"delete-img"},d=["src"],u=["onClick"],b={key:1,class:"file-input"},h={class:"delete-img"},k=["src"],m=["onClick"],f={key:0,class:"message"},w={class:"card-footer"};function T(e,n,a,T,y,v){return(0,t.wg)(),(0,t.iD)("div",l,[(0,t._)("div",r,[o,(0,t._)("form",{onSubmit:n[6]||(n[6]=(0,s.iM)(((...e)=>v.saveBaner&&v.saveBaner(...e)),["prevent"]))},[(0,t._)("div",c,[!1===y.doneTop?((0,t.wg)(),(0,t.iD)("div",p,[(0,t._)("input",{type:"file",ref:"fileInput2",class:"input-baner",onChange:n[0]||(n[0]=(...e)=>v.handleFileChange&&v.handleFileChange(...e)),multiple:""},null,544),0===y.banerTop.length?((0,t.wg)(),(0,t.iD)("button",{key:0,onClick:n[1]||(n[1]=(...e)=>v.triggerFileInput&&v.triggerFileInput(...e)),class:"btn btn-baner btn-default"},"Добавити1")):(0,t.kq)("",!0),y.banerTop.length>=1?((0,t.wg)(),(0,t.iD)("div",g,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(y.banerTop,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"image-delete",key:n},[e?((0,t.wg)(),(0,t.iD)("img",{key:0,src:e,class:"imgInput"},null,8,d)):(0,t.kq)("",!0),e?((0,t.wg)(),(0,t.iD)("span",{key:1,class:"deleteSpan",onClick:e=>v.deleteBanerTop(n)},"x",8,u)):(0,t.kq)("",!0)])))),128)),y.banerTop.length>=1?((0,t.wg)(),(0,t.iD)("button",{key:0,onClick:n[2]||(n[2]=(...e)=>v.triggerFileInput&&v.triggerFileInput(...e)),class:"btn btn-block btn-default"},"Добавити1")):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),!0===y.doneTop?((0,t.wg)(),(0,t.iD)("div",b,[(0,t._)("input",{type:"file",ref:"fileInput22",class:"input-baner",onChange:n[3]||(n[3]=(...e)=>v.handleFileChange&&v.handleFileChange(...e)),multiple:""},null,544),(0,t._)("div",h,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(y.banerTop,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"image-delete",key:n},[e?((0,t.wg)(),(0,t.iD)("img",{key:0,src:e,class:"imgInput"},null,8,k)):(0,t.kq)("",!0),e?((0,t.wg)(),(0,t.iD)("span",{key:1,class:"deleteSpan",onClick:e=>v.deleteBannerTop(n)},"x",8,m)):(0,t.kq)("",!0)])))),128)),(0,t._)("button",{onClick:n[4]||(n[4]=(...e)=>v.triggerFileInput&&v.triggerFileInput(...e)),class:"btn btn-block btn-default"},"Добавити2")])])):(0,t.kq)("",!0)]),e.showMessage?((0,t.wg)(),(0,t.iD)("div",f,(0,i.zw)(y.message),1)):(0,t.kq)("",!0),(0,t._)("div",w,[(0,t._)("button",{onClick:n[5]||(n[5]=(...e)=>v.saveBaner&&v.saveBaner(...e)),class:"btn btn-primary",type:"submit"},"Зберегти")])],32)])])}var y=a(355),v=a(650),C={data(){return{banners:{},banerTop:[],fileBanerTop:[],message:"Збережено!",doneTop:!1}},methods:{handleFileChange(e){const n=e.target.files;for(let a=0;a<n.length;a++){const e=n[a],t=URL.createObjectURL(e);this.banerTop.push(t),this.fileBanerTop.push(e)}},triggerFileInput(){this.$refs.fileInput22.click()},deleteBanerTop(e){this.banerTop.splice(e,1),this.fileBanerTop.splice(e,1)},async deleteBannerTop(e){const n=(0,v.cF)(),a=(0,v.iH)(n,`banners/bannerTop/${e}`);try{await(0,v.oq)(a),console.log(`Файл з індексом ${e} успішно видалено`)}catch(l){console.error(`Помилка видалення файлу з індексом ${e}:`,l)}const t=(0,y.N8)(),s=`banners/bannerTop/${e}`,i=(0,y.iH)(t,s);await(0,y.Od)(i).then((()=>{console.log("Item successfully deleted from Realtime Database")})).catch((e=>{console.log("Error deleting item from Realtime Database: ",e)}))},async saveBaner(){const e=(0,y.N8)(),n=(0,v.cF)(),a="banners",t=(0,y.iH)(e,a),s=await(0,y.U2)(t),i=(s.val()&&s.val().bannerTop,[]);await Promise.all(this.fileBanerTop.map((async(e,a)=>{const t=(0,v.iH)(n,`banners/bannerTop/${a}`);await(0,v.KV)(t,e);const s=await(0,v.Jt)(t);i.push({url:s,id:a})}))),i.sort(((e,n)=>e.id-n.id)),(0,y.Vx)(t,{bannerTop:i.map((e=>e.url))})},async getBanners(){const e=(0,y.N8)(),n=(0,y.iH)(e,"banners");await new Promise((e=>{(0,y.jM)(n,(n=>{n.exists()?(this.banners=n.val(),this.doneTop=!0,this.banerTop=this.banners.bannerTop):(console.log("Баннер не знайдено"),this.doneTop=!1),e()}))}))}},async mounted(){await this.getBanners()}},D=a(744);const B=(0,D.Z)(C,[["render",T]]);var F=B}}]);
//# sourceMappingURL=818.45cbc082.js.map